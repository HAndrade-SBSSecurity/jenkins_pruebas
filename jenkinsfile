pipeline {
    agent any
    environment {
        COUNTER = 0 // Inicializa el contador en cero
    }
    stages {
        stage('Increment Counter') {
            steps {
                script {
                    def sleepTime = 30 // Inicializa sleepTime en 30 segundos
                    while (true) {
                        COUNTER++
                        echo "El contador es: ${COUNTER}"
                        sleep time: sleepTime, unit: 'SECONDS' // Espera 30 segundos
                        sleepTime = sleepTime + 30
                    }
                }
            }
        }
        stage('Utilizar el Contador') {
            steps {
                script {
                    echo "Utilizando el contador en otra parte del pipeline: ${COUNTER}"
                }
            }
        }
    }
}